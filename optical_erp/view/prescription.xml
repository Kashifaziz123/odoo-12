<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

		<record id="dr_prescription" model="ir.ui.view">
			<field name="name">Doctor Prescription</field>
			<field name="model">dr.prescription</field>
			<field name="arch" type="xml">
				<form string="Doctor Prescription">
					<header>
						<button name="open_customer" string="Sale Order" type="object"  ></button>
					</header>
					<div class="oe_title">
						<h1>
							<field name="name"/>
						</h1>
					</div>
					<group colspan="6" col="2">
						<field name="dr" options='{"no_open": True, "no_create": True}'   required="1"/>
						<field name="patient" options='{"no_open": True, "no_create": True}' required="1"/>
						<field name="patient_age" string="Patient Age"/>
						<field name="checkup_date"  required="1"/>
						<field name="test_type" options='{"no_open": True, "no_create": True}'  required="1"/>
						<field name="prescription_type"   required="1"/>
						<field name="family_eye_history" string="Family Eye History"/>
						<field name="ocular_history" string="Ocular History"/>
						<field name="consultation" string="Consultation"/>

					</group>
					<table colspan="8" col="8" border="1" cellpadding="0" cellspacing="0" class="table table-bordered pp" width="100%">

						<tr>
							<th style="text-align:center;">
								R/L
							</th>
							<th style="text-align:center;">
								SPH
							</th>


							<th style="text-align:center;">
								CYL
							</th>
							<th style="text-align:center;">
								AXIS
							</th>
							<th style="text-align:center;">
								ADD
							</th>
							<!--						   <th style="text-align:center;">-->
							<!--							 Dim-->
							<!--						 </th>-->
							<!--						    <th style="text-align:center;">-->
							<!--							 Height-->
							<!--						 </th>-->
						</tr>
						<tr>
							<td>
								<span style="text-align:center;">Right</span>
							</td>
							<td style="text-align:center;">
								<field name="sph"/>
							</td>
							<td style="text-align:center;">
								<field name="cyl"/>
							</td>
							<td style="text-align:center;">
								<field name="ax"/>
							</td>
							<td style="text-align:center;">
								<field name="add1"/>
							</td>
						</tr>
						<tr>
							<td>
								<span style="text-align:center;">Left</span>
							</td>
							<td style="text-align:center;">
								<field name="sphl"/>
							</td>
							<td style="text-align:center;">
								<field name="cyll" attrs="{'required': [('axl', '!=', False)]}" />
							</td>

							<td style="text-align:center;">
								<field name="axl" attrs="{'required': [('cyll', '!=', False)]}" />
							</td>

							<td style="text-align:center;">
								<field name="add1l"/>
							</td>


						</tr>
					</table>
					<group>
						<field name="dual_pd"/>
						<field name="prism"/>
					</group>

					<table border="1" cellpadding="0" attrs="{'invisible': [('dual_pd', '=', True)]}" cellspacing="0"
						   class="table table-bordered pp" width="100px">

						<tr>
							<th style="text-align:center;">
								PD
							</th>

						</tr>
						<tr>
							<td style="text-align:center;">
								<field name="pd"/>
							</td>
						</tr>
					</table>
					<table border="1" cellpadding="0" attrs="{'invisible': [('dual_pd', '=', False)]}" cellspacing="0"
						   class="table table-bordered pp" width="150px">

						<tr>
							<th style="text-align:center;">
								RIGHT PD
							</th>

							<th style="text-align:center;">
								LEFT PD
							</th>
						</tr>
						<tr>
							<td style="text-align:center;">
								<field name="pdr" attrs="{'required': [('pdl', '!=', False)]}"/>
							</td>
							<td style="text-align:center;">
								<field name="pdl" attrs="{'required': [('pdr', '!=', False)]}"/>
							</td>
						</tr>
					</table>
					<table colspan="8" col="8" border="1" cellpadding="0" attrs="{'invisible': [('prism', '=', False)]}"
						   cellspacing="0" class="table table-bordered pp" widht="100%">

						<tr>
							<th style="text-align:center;">
								R/L
							</th>
							<th style="text-align:center;">
								Prism Value
							</th>


							<th style="text-align:center;">
								Base Direction
							</th>

						</tr>
						<tr>
							<td>
								<span style="text-align:center;">Right</span>
							</td>

							<td style="text-align:center;">
								<field name="prism_valr"/>
							</td>
							<td style="text-align:center;">
								<field name="baser"/>
							</td>

						</tr>
						<tr>
							<td>
								<span style="text-align:center;">Left</span>
							</td>
							<td style="text-align:center;">
								<field name="prism_vall"/>
							</td>
							<td style="text-align:center;">
								<field name="basel"/>
							</td>

						</tr>
					</table>


					<separator string="Recommendations"/>
					<separator string="Note"/>
					<field name="dr_notes" placeholder="Note"></field>


				</form>
			</field>
		</record>


		<record id="dr_prescription_tree" model="ir.ui.view">
			<field name="name">Doctor Prescription Tree View</field>
			<field name="model">dr.prescription</field>
			<field name="arch" type="xml">
				<tree>
					<field name="dr"/>
					<field name="checkup_date"/>
					<field name="test_type"/>
				</tree>
			</field>
		</record>


		<!--		<record model="ir.ui.view" id="partner_view_form_new">-->
		<!--			<field name="name">partner.view.doctor</field>-->
		<!--			<field name="model">res.partner</field>-->
		<!--			<field name="inherit_id" ref="base.view_partner_form" />-->
		<!--			<field name="arch" type="xml">-->
		<!--				<xpath expr="//div[hasclass('oe_button_box')]" position="inside">-->
		<!--					<button name="open_doctor_prescriptions" class="oe_stat_button" type="object"  icon="fa-tasks">-->
		<!--						<field string="Prescription's" name="prescription_count" widget="statinfo"/>-->
		<!--					</button>-->
		<!--				</xpath>-->
		<!--			</field>-->
		<!--		</record>-->


		<record id="doctor_view_form" model="ir.ui.view">
			<field name="name">doctor.view.form</field>
			<field name="model">optical.dr</field>
			<field name="inherit_id" ref="doctor.dr_doctor"/>
			<field name="arch" type="xml">
				<xpath expr="//div[hasclass('oe_button_box')]" position="inside">
					<button name="open_doctor_prescriptions" class="oe_stat_button" type="object"  icon="fa-tasks">
						<field string="Prescription" name="prescription_count" widget="statinfo"/>
					</button>
				</xpath>
			</field>
		</record>


		<record id="sale_order_view_form" model="ir.ui.view">
			<field name="name">sale.order.form</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='payment_term_id']" position="before">
					<field string="Prescription's" name="prescription_id" domain="[('patient','=',partner_id)]" />
				</xpath>
			</field>
		</record>











		<menuitem id="optical_erp_root" name="Optical Erp" sequence="1" web_icon="optical_erp,static/description/icon.png"/>
		<menuitem id="optical_erp_doctor" name="Optometrist" parent="optical_erp_root" action="doctor.action_doctor_window" groups="doctor.group_optical_erp_doctors,base.group_system" sequence="1"/>
		<menuitem id="optical_erp_sale_order" name="Sale Order" parent="optical_erp_root" action="sale.action_orders"   sequence="3"/>
		<menuitem id="optical_erp_customer" name="Customer" parent="optical_erp_root" action="base.action_partner_customer_form"   sequence="4"/>



	</data>
</odoo>
