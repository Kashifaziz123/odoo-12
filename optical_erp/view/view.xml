<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

		<record id="dr_prescription" model="ir.ui.view">
			<field name="name">Doctor Prescription</field>
			<field name="model">dr.prescription</field>
			<field name="arch" type="xml">
				<form string="Doctor Prescription">
					<group colspan="6" col="2">
						<field name="dr"  required="1"/>
						<field name="patient" required="1"/>
						<field name="checkup_date"  required="1"/>
						<field name="test_type"  required="1"/>
					</group>
					<table colspan="8" col="8" border="1" cellpadding="0" cellspacing="0" class="table table-bordered pp" width="100%">

						<tr>
							<th style="text-align:center;">
								R/L
							</th>
							<th style="text-align:center;">
								SPH
							</th>


							<th style="text-align:center;">
								CYL
							</th>
							<th style="text-align:center;">
								AXIS
							</th>
							<th style="text-align:center;">
								ADD
							</th>
							<!--						   <th style="text-align:center;">-->
							<!--							 Dim-->
							<!--						 </th>-->
							<!--						    <th style="text-align:center;">-->
							<!--							 Height-->
							<!--						 </th>-->
						</tr>
						<tr>
							<td>
								<span style="text-align:center;">Right</span>
							</td>
							<td style="text-align:center;">
								<field name="sph"/>
							</td>
							<td style="text-align:center;">
								<field name="cyl"/>
							</td>
							<td style="text-align:center;">
								<field name="ax"/>
							</td>
							<td style="text-align:center;">
								<field name="add1"/>
							</td>

							<!--						   <td style="text-align:center;">-->
							<!--							  <field name="dim"/>-->
							<!--						 </td>-->


							<!--						   <td style="text-align:center;">-->
							<!--							  <field name="height"/>-->
							<!--						 </td>-->


						</tr>
						<tr>
							<td>
								<span style="text-align:center;">Left</span>
							</td>
							<td style="text-align:center;">
								<field name="sphl"/>
							</td>
							<td style="text-align:center;">
								<field name="cyll" attrs="{'required': [('axl', '!=', False)]}" />
							</td>

							<td style="text-align:center;">
								<field name="axl" attrs="{'required': [('cyll', '!=', False)]}" />
							</td>

							<td style="text-align:center;">
								<field name="add1l"/>
							</td>

							<!--						   <td style="text-align:center;">-->
							<!--							  <field name="diml"/>-->
							<!--						   </td>-->

							<!--						   <td style="text-align:center;">-->
							<!--							  <field name="heightl"/>-->
							<!--						 </td>-->

						</tr>
					</table>
					<field name="dual_pd" invisible="1"/>

					<table border="1" cellpadding="0" attrs="{'invisible': [('dual_pd', '=', True)]}" cellspacing="0" class="table table-bordered pp" width="100px">

						<tr>
							<th style="text-align:center;">
								PD
							</th>

						</tr>
						<tr>
							<td style="text-align:center;">
								<field name="pd"/>
							</td>
						</tr>
					</table>
					<table border="1" cellpadding="0" attrs="{'invisible': [('dual_pd', '=', False)]}" cellspacing="0" class="table table-bordered pp" width="150px">

						<tr>
							<th style="text-align:center;">
								RIGHT PD
							</th>

							<th style="text-align:center;">
								LEFT PD
							</th>
						</tr>
						<tr>
							<td style="text-align:center;">
								<field name="pdr" attrs="{'required': [('pdl', '!=', False)]}"/>
							</td>
							<td style="text-align:center;">
								<field name="pdl" attrs="{'required': [('pdr', '!=', False)]}"/>
							</td>
						</tr>
					</table>

					<separator string="Recommendations"/>
					<separator string="Note"/>
					<field name="dr_notes" placeholder="Note"></field>


				</form>
			</field>
		</record>


		<record id="dr_prescription_tree" model="ir.ui.view">
			<field name="name">Doctor Prescription Tree View</field>
			<field name="model">dr.prescription</field>
			<field name="arch" type="xml">
				<tree>
					<field name="dr"/>
					<field name="checkup_date"/>
					<field name="test_type"/>
				</tree>
			</field>
		</record>








		<record model="ir.ui.view" id="partner_view_form_new">
			<field name="name">partner.view.doctor</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_form" />
			<field name="arch" type="xml">
				<xpath expr="//div[hasclass('oe_button_box')]" position="inside">
<!--					<button string="Create Users" class="oe_highlight" type="object" name="create_users"/>-->
					<button name="open_doctor_prescriptions" class="oe_stat_button" type="object" icon="fa-calendar">
						<field string="Prescription's" name="prescription_count" widget="statinfo"/>
					</button>

				</xpath>
				<xpath expr="//field[@name='country_id']" position="after">
					<group>
						<field name="is_doctor" string="is_doctor"  invisible="1"/>
						<field name="is_patient" string="is_patient" invisible="1"/>
					</group>
				</xpath>
			</field>
		</record>

		<record id="action_patient" model="ir.actions.act_window">
			<field name="name">Patients</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">res.partner</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{'default_is_patient':True}</field>
			<field name="domain">[('is_patient','=',True)]</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					Create your First Patient !
				</p>
			</field>
		</record>

		<record id="action_doctor" model="ir.actions.act_window">
			<field name="name">Doctor</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">res.partner</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{'default_is_doctor':True}</field>
			<field name="domain">[('is_doctor','=',True)]</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					Create your First Doctor!
				</p>
			</field>
		</record>

		<record id="action_config" model="ir.actions.act_window">
			<field name="name">Eye Test Type</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">eye.test.type</field>
			<field name="view_mode">form</field>
		</record>


		<menuitem id="optical_erp_root" name="Optical Erp" sequence="1" web_icon="optical_erp,static/description/icon.png"/>
		<menuitem id="optical_erp_doctor" name="Doctor" parent="optical_erp_root" action="action_doctor" sequence="1"/>
		<menuitem id="optical_erp_patient" name="Patient" parent="optical_erp_root" action="action_patient" sequence="2"/>
		<menuitem id="optical_erp_config" name="Eye Test Type" parent="optical_erp_root" action="action_config" sequence="3"/>
	</data>
</odoo>
