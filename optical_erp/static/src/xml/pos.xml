<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="PrintPrescriptionScreenWidget" owl="1">
        <div class='receipt-screen screen'>
            <div class='screen-content'>
                <div class='top-content'>
                    <span class='button back' t-on-click="back">
                        <i class='fa fa-angle-double-left'></i>
                        Back
                    </span>
                </div>
                <div class="centered-content touch-scrollable">
                    <div class="button print" t-on-click="_printReceipt">
                        <i class='fa fa-print'></i> Print Prescription
                    </div>
                    <div class="pos-receipt-container">
                        <t t-call="PrescriptionOrderReceipt" t-ref="order-receipt"/>
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name='ClientListScreen' t-inherit="point_of_sale.ClientListScreen" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('back')]" position="after">
            <div t-if="isNextButtonVisible" t-on-click="prescription_count_click(state.selectedClient)" class="button next highlight">
                Prescription
                <t t-esc="prescription_count"/>
            </div>
        </xpath>
    </t>

    <t t-name="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('pos-receipt-contact')]" position="inside">
            <t t-call="PrescriptionOrderReceiptTable"/>
        </xpath>
    </t>

    <t t-name="PrescriptionOrderReceipt" owl="1">
        <div class="pos-receipt">
            <t t-if="company.logo">
                <img class="pos-receipt-logo" t-att-src="company.logo" alt="Logo"/>
                <br/>
                <div class="pos-receipt-contact">
                    <t t-if="company.name">
                        <div><t t-esc="company.name" /></div>
                    </t>
                </div>
            </t>
            <t t-if="!company.logo">
                <h2 class="pos-receipt-center-align">
                    <t t-esc="company.name" />
                </h2>
                <br/>
            </t>
            <div class="pos-receipt-contact">
                <t t-if="company.contact_address">
                    <div><t t-esc="company.contact_address" /></div>
                </t>
                <t t-if="company.phone">
                    <div>Tel:<t t-esc="company.phone" /></div>
                </t>
                <t t-if="company.vat">
                    <div><t t-esc="company.vat_label"/>:<t t-esc="company.vat" /></div>
                </t>
                <t t-if="company.email">
                    <div><t t-esc="company.email" /></div>
                </t>
                <t t-if="company.website">
                    <div><t t-esc="company.website" /></div>
                </t>
                <t t-if="cashier">
                    <div class="cashier">
                        <div>--------------------------------</div>
                        <div>Served by <t t-esc="cashier.name" /></div>
                    </div>
                </t>
                <t t-call="PrescriptionOrderReceiptTable"/>
            </div>
            <br/>
            <div class="pos-receipt-order-data">
                <div><t t-esc="date" /></div>
            </div>

        </div>
    </t>

    <t t-name="PrescriptionOrderReceiptTable" owl="1">
        <t t-if="receipt">
            <t t-set="optical_order" t-value="receipt.optical_order"/>
        </t>
        <t t-if="optical_order !== 0 ">
            <br/><br/>
            <div class="prescription_receipt_details">
                <table class="left_align">
                    <tr>
                        <th>Reference:</th>
                        <td><t t-esc="optical_order.name"/></td>
                        <th class="padding">Client Name:</th>
                        <td><t t-esc="optical_order.customer[1]"/></td>
                    </tr>
                    <tr>
                        <th>Prescription Date:</th>
                        <td><t t-esc="optical_order.checkup_date"/></td>
                        <th class="padding">Test Type:</th>
                        <td><t t-esc="optical_order.test_type[1]"/></td>
                    </tr>
                </table>
            </div>
            <div class="prescription_receipt_table">
                <table>
                    <tr>
                        <th rowspan="2"></th>
                        <th colspan="6">Right</th>
                    </tr>
                    <tr>
                        <th>SPH</th>
                        <th>CYL</th>
                        <th>AXIS</th>
                        <th>Add</th>
                        <th>Prism</th>
                        <th>Base</th>
                    </tr>
                    <tr>
                        <th>Distance</th>
                        <td><t t-esc="optical_order.od_sph_distance"/></td>
                        <td><t t-esc="optical_order.od_cyl_distance"/></td>
                        <td><t t-esc="optical_order.od_ax_distance"/></td>
                        <td><t t-esc="optical_order.od_add_distance"/></td>
                        <td><t t-esc="optical_order.od_prism_distance"/></td>
                        <td><t t-esc="optical_order.od_base_distance"/></td>
                    </tr>
                    <tr>
                        <th>Near</th>
                        <td><t t-esc="optical_order.od_sph_near"/></td>
                        <td><t t-esc="optical_order.od_cyl_near"/></td>
                        <td><t t-esc="optical_order.od_ax_near"/></td>
                        <td><t t-esc="optical_order.od_add_near"/></td>
                        <td><t t-esc="optical_order.od_prism_near"/></td>
                        <td><t t-esc="optical_order.od_base_near"/></td>
                    </tr>
                    <tr class="nbsp">
                        <th colspan="7" class="nbsp">&#160;</th>
                    </tr>
                    <tr>
                        <th rowspan="2"></th>
                        <th colspan="6">Left</th>
                    </tr>
                    <tr>
                        <th>SPH</th>
                        <th>CYL</th>
                        <th>AXIS</th>
                        <th>Add</th>
                        <th>Prism</th>
                        <th>Base</th>
                    </tr>
                    <tr>
                        <th>Distance</th>
                        <td><t t-esc="optical_order.os_sph_distance"/></td>
                        <td><t t-esc="optical_order.os_cyl_distance"/></td>
                        <td><t t-esc="optical_order.os_ax_distance"/></td>
                        <td><t t-esc="optical_order.os_add_distance"/></td>
                        <td><t t-esc="optical_order.os_prism_distance"/></td>
                        <td><t t-esc="optical_order.os_base_distance"/></td>
                    </tr>
                    <tr>
                        <th>Near</th>
                        <td><t t-esc="optical_order.os_sph_near"/></td>
                        <td><t t-esc="optical_order.os_cyl_near"/></td>
                        <td><t t-esc="optical_order.os_ax_near"/></td>
                        <td><t t-esc="optical_order.os_add_near"/></td>
                        <td><t t-esc="optical_order.os_prism_near"/></td>
                        <td><t t-esc="optical_order.os_base_near"/></td>
                    </tr>
                    <tr class="nbsp">
                        <th colspan="5" class="nbsp">&#160;</th>
                        <th colspan="2" class="nbsp">&#160;</th>
                    </tr>
                    <tr>
                        <th>iPD</th>
                        <th>Cl Right</th>
                        <th>Cl Left</th>
                        <th>Base Curve</th>
                        <th>Dim</th>
                    </tr>
                    <tr>
                        <td><t t-esc="optical_order.ipd"/></td>
                        <td><t t-esc="optical_order.cl_right"/></td>
                        <td><t t-esc="optical_order.cl_left"/></td>
                        <td><t t-esc="optical_order.base_curve"/></td>
                        <td><t t-esc="optical_order.dim"/></td>
                    </tr>
                </table>
            </div>
        </t>
    </t>

    <t t-name="PrescriptionButton" owl="1">
        <div class='control-button button confirm'>
            <i class='fa-prescription' />
            <span class="label optical_prescription">
                <t t-if="env.pos.get_optical_reference()">
                    <t t-esc="env.pos.get_optical_reference().name" />
                </t>
                <t t-if="!env.pos.get_optical_reference()">
                    Prescription
                </t>
            </span>
        </div>
    </t>

    <t t-name="PrescriptionHistoryButton" owl="1">
        <div class='control-button button confirm'>
            Prescription History
        </div>
    </t>

    <t t-name="SelectGlassesButton" owl="1">
        <div class='control-button button confirm'>
            Select Glasses
        </div>
    </t>

    <t t-name="PrescriptionCreationWidget" owl="1">
        <div class="modal-dialog no-scroll" role="dialog">
            <div class="prescription_form_div popup widget order-scroller touch-scrollable">
                <p class="title" style="text-align:left;">Create Prescription</p>
                <form id="prescription_form">
                    <table>
                        <tr>
                            <th>Optometrist:</th>
                            <td>
                                <select name="dr">
                                    <t t-foreach="doctors || []" t-as="item" t-key="item.id">
                                        <option t-attf-data-id="{{ item.id }}"><t t-esc='item.name'/></option>
                                    </t>
                                </select>
                            </td>
                            <th>Client:</th>
                            <td>
                                <select name="customer">
                                    <t t-foreach="partners || []" t-as="item" t-key="item.id">
                                        <t t-if="customer == item.id">
                                            <option t-attf-data-id="{{ item.id }}" t-attf-selected=""><t t-esc='item.name'/></option>
                                        </t>
                                        <t t-if="customer != item.id">
                                            <option t-attf-data-id="{{ item.id }}"><t t-esc='item.name'/></option>
                                        </t>
                                    </t>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>Prescription Date:</th>
                            <td>
                                <input type="date"  name="checkup_date"  maxlength="10"  t-attf-value="{{today}}"/>
                            </td>
                            <th>Test Type:</th>
                            <td>
                                <select name="test_type">
                                    <t t-foreach="test_type || []" t-as="item" t-key="item.id">
                                        <option t-attf-data-id="{{ item.id }}"><t t-esc='item.name'/></option>
                                    </t>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>Prescription Type:</th>
                            <td>
                                <select name="prescription_type">
                                   <option>Internal</option>
                                   <option>External</option>
                                </select>
                            </td>
                            <th>Family Eye History:</th>
                            <td>
                                <input name="family_eye_history" type="text"/>
                            </td>
                        </tr>
                        <tr>
                            <th>Ocular History:</th>
                            <td>
                                <input name="ocular_history" type="text"/>
                            </td>
                            <th>Consultation Reason:</th>
                            <td>
                                <input name="consultation" type="text"/>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="4">&#160;</th>
                        </tr>
                    </table>
                    <table class="table">
                        <tr>
                            <th rowspan="2"></th>
                            <th colspan="6">Right</th>
                        </tr>
                        <tr>
                            <th>SPH</th>
                            <th>CYL</th>
                            <th>AXIS</th>
                            <th>Add</th>
                            <th>Prism</th>
                            <th>Base</th>
                        </tr>
                        <tr>
                            <th>Distance</th>
                            <td>
                                <select name="od_sph_distance">
                                    <t t-set="check" t-value="30"/>
                                    <t t-foreach="abc || []" t-as="i" t-key="i">
                                        <t t-if="check &gt; 0">
                                            <option>-<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check - 0.25"/>
                                    </t>
                                    <option t-attf-selected="selected">0</option>
                                    <t t-set="check" t-value="0.25"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 30.25">
                                            <option>+<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="od_cyl_distance">
                                    <t t-set="check" t-value="10"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &gt; 0">
                                            <option>-<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check - 0.25"/>
                                    </t>
                                    <option t-attf-selected="selected">0</option>
                                </select>
                            </td>
                            <td>
                                <select name="od_ax_distance">
                                    <t t-set="check" t-value="1"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 181">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 1"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="od_add_distance">
                                    <t t-set="check" t-value="0"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 6.25">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="od_prism_distance">
                                    <t t-set="check" t-value="0.25"/>
                                    <option t-attf-selected="selected">0</option>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 5.25">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="od_base_distance">
                                    <option t-attf-selected="selected">0</option>
                                    <option>IN</option>
                                    <option>OUT</option>
                                    <option>UP</option>
                                    <option>DOWN</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>Near</th>
                            <td>
                                <select name="od_sph_near">
                                    <t t-set="check" t-value="30"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &gt; 0">
                                            <option>-<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check - 0.25"/>
                                    </t>
                                    <option t-attf-selected="selected">0</option>
                                    <t t-set="check" t-value="0.25"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 30.25">
                                            <option>+<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="od_cyl_near">
                                    <t t-set="check" t-value="10"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &gt; 0">
                                            <option>-<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check - 0.25"/>
                                    </t>
                                    <option t-attf-selected="selected">0</option>
                                </select>
                            </td>
                            <td>
                                <select name="od_ax_near">
                                    <t t-set="check" t-value="1"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 181">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 1"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="od_add_near">
                                    <t t-set="check" t-value="0"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 6.25">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="od_prism_near">
                                    <t t-set="check" t-value="0.25"/>
                                    <option t-attf-selected="selected">0</option>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 5.25">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="od_base_near">
                                    <option t-attf-selected="selected">0</option>
                                    <option>IN</option>
                                    <option>OUT</option>
                                    <option>UP</option>
                                    <option>DOWN</option>
                                </select>
                            </td>
                        </tr>
                        <tr class="nbsp">
                            <th colspan="7" class="nbsp">&#160;</th>
                        </tr>
                        <tr>
                            <th rowspan="2"></th>
                            <th colspan="6">Left</th>
                        </tr>
                        <tr>
                            <th>SPH</th>
                            <th>CYL</th>
                            <th>AXIS</th>
                            <th>Add</th>
                            <th>Prism</th>
                            <th>Base</th>
                        </tr>
                        <tr>
                            <th>Distance</th>
                            <td>
                                <select name="os_sph_distance">
                                    <t t-set="check" t-value="30"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &gt; 0">
                                            <option>-<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check - 0.25"/>
                                    </t>
                                    <option t-attf-selected="selected">0</option>
                                    <t t-set="check" t-value="0.25"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 30.25">
                                            <option>+<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="os_cyl_distance">
                                    <t t-set="check" t-value="10"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &gt; 0">
                                            <option>-<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check - 0.25"/>
                                    </t>
                                    <option t-attf-selected="selected">0</option>
                                </select>
                            </td>
                            <td>
                                <select name="os_ax_distance">
                                    <t t-set="check" t-value="1"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 181">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 1"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="os_add_distance">
                                    <t t-set="check" t-value="0"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 6.25">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="os_prism_distance">
                                    <t t-set="check" t-value="0.25"/>
                                    <option t-attf-selected="selected">0</option>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 5.25">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="os_base_distance">
                                    <option t-attf-selected="selected">0</option>
                                    <option>IN</option>
                                    <option>OUT</option>
                                    <option>UP</option>
                                    <option>DOWN</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>Near</th>
                            <td>
                                <select name="os_sph_near">
                                    <t t-set="check" t-value="30"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &gt; 0">
                                            <option>-<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check - 0.25"/>
                                    </t>
                                    <option t-attf-selected="selected">0</option>
                                    <t t-set="check" t-value="0.25"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 30.25">
                                            <option>+<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="os_cyl_near">
                                    <t t-set="check" t-value="10"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &gt; 0">
                                            <option>-<t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check - 0.25"/>
                                    </t>
                                    <option t-attf-selected="selected">0</option>
                                </select>
                            </td>
                            <td>
                                <select name="os_ax_near">
                                    <t t-set="check" t-value="1"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 181">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 1"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="os_add_near">
                                    <t t-set="check" t-value="0"/>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 6.25">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="os_prism_near">
                                    <t t-set="check" t-value="0.25"/>
                                    <option t-attf-selected="selected">0</option>
                                    <t t-foreach="abc || []" t-as="i"  t-key="i">
                                        <t t-if="check &lt; 5.25">
                                            <option><t t-esc="check"/></option>
                                        </t>
                                        <t t-set="check" t-value="check + 0.25"/>
                                    </t>
                                </select>
                            </td>
                            <td>
                                <select name="os_base_near">
                                    <option t-attf-selected="selected">0</option>
                                    <option>IN</option>
                                    <option>OUT</option>
                                    <option>UP</option>
                                    <option>DOWN</option>
                                </select>
                            </td>
                        </tr>
                        <tr class="nbsp">
                            <th colspan="5" class="nbsp">&#160;</th>
                            <th colspan="2" class="nbsp">&#160;</th>
                        </tr>
                        <tr>
                            <th>iPD</th>
                            <th>Cl Right</th>
                            <th>Cl Left</th>
                            <th>Base Curve</th>
                            <th>Dim</th>
                            <th colspan="2" class="nbsp">&#160;</th>
                        </tr>
                        <tr>
                            <td><input name="ipd" type="text"/></td>
                            <td><input name="cl_right" type="text"/></td>
                            <td><input name="cl_left" type="text"/></td>
                            <td><input name="base_curve" type="text"/></td>
                            <td><input name="dim" type="text"/></td>
                            <th colspan="2" class="nbsp">&#160;</th>
                        </tr>
                    </table>
                    <table>
                        <tr>
                            <td colspan="4">&#160;</td>
                        </tr>
                        <tr>
                            <td colspan="4">&#160;</td>
                        </tr>
                        <tr>
                            <th>Diagnosis for the client:</th>
                            <td colspan="3">
                                <input name="diagnosis_client" type="text"/>
                            </td>
                        </tr>
                        <tr>
                            <th>Notes for the Laboratory:</th>
                            <td colspan="3">
                                <input name="notes_laboratory" type="text"/>
                            </td>
                        </tr>
                        <tr>
                            <th>Optometrist internal observations:</th>
                            <td colspan="3">
                                <input name="optometrist_observation" type="text"/>
                            </td>
                        </tr>
                    </table>
                </form>
                <div class="footer">
                    <div class="button cancel" t-on-click="click_confirm">
                        Create
                    </div>
                    <div class="button cancel" t-on-click="cancel">
                        Cancel
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="OrderCreationWidget" owl="1">
        <div class="modal-dialog">
            <div class="prescription_form_div popup widget order-scroller touch-scrollable">
                <p class="title" style="text-align:left;">Add Product</p>
                <form id="order_form">
                    <table>
                        <tr>
                            <th>Client:</th>
                            <td colspan="3"><t t-esc="customer"/></td>
                        </tr>
                        <tr>
                            <th>Prescription:</th>
                            <td colspan="3"><t t-esc="optical_reference"/></td>
                        </tr>
                        <tr>
                            <th>Glasses:</th>
                            <td colspan="3">
                                <select id="glasses">
                                </select>
                            </td>
                        </tr>
                        <tr class="nbsp">
                            <th colspan="4" class="nbsp">&#160;</th>
                        </tr>
                        <tr>
                            <td><input class="coupon_question" type="radio" name="far"/> Far</td>
                            <td><input class="coupon_question" type="radio" name="far"/> Close</td>
                            <td><input class="coupon_question" type="checkbox" name="glass_right"/>Glass right</td>
                            <td><input class="coupon_question" type="checkbox" name="glass_left"/>Glass left</td>
                        </tr>
                        <tr class="nbsp">
                            <th colspan="4" class="nbsp">&#160;</th>
                        </tr>
                    </table>
                    <table class="properties">
                        <tr>
                            <td class="sub-table">
                                <table>
                                    <t t-foreach="variants1 || []" t-as="item" t-key="item.id">
                                        <tr>
                                            <th><t t-esc='item.name'/></th>
                                            <t t-foreach="item.attributes || []" t-as="items">
                                                <tr>
                                                    <td><input class="coupon_question attribute_variant" t-on-change="attribute_variant_onChange" type="radio" t-attf-name="{{ item.name }}" t-attf-value="{{ items }}"/><t t-esc='items'/></td>
                                                </tr>
                                            </t>
                                        </tr>
                                    </t>
                                 </table>
                            </td>
                            <td class="sub-table">
                                <table>
                                    <t t-foreach="variants2 || []" t-as="item" t-key="item.id">
                                        <tr>
                                            <th><t t-esc='item.name'/></th>
                                            <t t-foreach="item.attributes || []" t-as="items">
                                                <tr>
                                                    <td><input class="coupon_question attribute_variant" t-on-change="attribute_variant_onChange" type="radio" t-attf-name="{{ item.name }}" t-attf-value="{{ items }}"/><t t-esc='items'/></td>
                                                </tr>
                                            </t>
                                        </tr>
                                    </t>
                                 </table>
                            </td>
                            <td class="sub-table">
                                <table>
                                    <t t-foreach="variants3 || []" t-as="item" t-key="item.id">
                                        <tr>
                                            <th><t t-esc='item.name'/></th>
                                            <t t-foreach="item.attributes || []" t-as="items">
                                                <tr>
                                                    <td><input class="coupon_question attribute_variant" t-on-change="attribute_variant_onChange" type="radio" t-attf-name="{{ item.name }}" t-attf-value="{{ items }}"/><t t-esc='items'/></td>
                                                </tr>
                                            </t>
                                        </tr>
                                    </t>
                                 </table>
                            </td>
                            <td class="sub-table">
                                <table>
                                    <t t-foreach="variants4 || []" t-as="item" t-key="item.id">
                                        <tr>
                                            <th><t t-esc='item.name'/></th>
                                            <t t-foreach="item.attributes || []" t-as="items">
                                                <tr>
                                                    <td><input class="coupon_question attribute_variant" t-on-change="attribute_variant_onChange" type="radio" t-attf-name="{{ item.name }}" t-attf-value="{{ items }}"/><t t-esc='items'/></td>
                                                </tr>
                                            </t>
                                        </tr>
                                    </t>
                                 </table>
                            </td>
                        </tr>
                    </table>
                    <div class="footer">
                        <div class="button cancel" t-on-click="click_confirm">
                            Create
                        </div>
                        <div class="button cancel" t-on-click="cancel">
                            Cancel
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </t>

    <t t-name="PrescriptionHistoryScreenContainer" owl="1">
        <div class="clientlist-screen screen">
            <div class="full_width screen-content">
                <section class="top-content">
                    <span class='button back' t-on-click="back">
                        <i class='fa fa-angle-double-left'></i>
                        Cancel
                    </span>
                    <div class='searchbox-client searchbox_date' style="right: 2px;">
                        <input placeholder='Search Date' size="1" t-on-keyup="updateDateList"/>
                        <span class='search-clear-client'></span>
                    </div>
                    <div class='searchbox-client searchbox_client'>
                        <input placeholder='Search Client' size="1" t-on-keyup="updateClientList"/>
                        <span class='search-clear-client'></span>
                    </div>
                </section>
                <section class="full-content">
                    <div class='window'>
                        <section class='subwindow collapsed'>
                            <div class='subwindow-container collapsed'>
                                <div class='subwindow-container-fix optical_order-details-content'>
                                    <t t-call="PrescriptionDetails"/>
                                </div>
                            </div>
                        </section>
                        <section class='subwindow'>
                            <div class='subwindow-container'>
                                <div class='subwindow-container-fix touch-scrollable scrollable-y'>
                                    <table class='client-list'>
                                       <thead>
                                            <tr>
                                                <th>Number</th>
                                                <th>Client</th>
                                                <th>Date</th>
                                                <th>Optometrist</th>
                                                <th>Test Type</th>
                                                <th>Prescription Type</th>
                                                <th>Status</th>
                                                <th>Send to Glasses</th>
                                                <th>Prescription</th>
                                            </tr>
                                       </thead>
                                       <tbody class='products-list-contents'>
                                            <t t-foreach="optical_orders" t-as="product" t-key="product.id">
                                                <tr t-attf-class="productlines {{(optical_order.id == product.id) ? 'highlight' : ''}}" t-att-data-id='product.id' t-on-click="prescription_line_click(product)">
                                                    <td><t t-esc='product.name' /></td>
                                                    <td><t t-esc='product.customer[1]' /></td>
                                                    <td><t t-esc='product.checkup_date' /></td>
                                                    <td><t t-esc='product.dr[1]' /></td>
                                                    <td><t t-esc='product.test_type[1]' /></td>
                                                    <td><t t-esc='product.prescription_type' /></td>
                                                    <td><t t-esc='product.state' /></td>
                                                    <td name="td_pos_optical_copy" t-att-data-order-id="product.id">
                                                        <button class="button pos_optical_copy" t-att-data-order-id="product.id" t-on-click="prescription_line_button(product)">
                                                            Copy Measures
                                                        </button>
                                                    </td>
                                                    <td> <i class="fa fa-print pos_optical_print" t-att-data-order-id="product.id" t-on-click="print_receipt(product)"/></td>
                                                </tr>
                                           </t>
                                       </tbody>
                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </section>
            </div>
        </div>
    </t>

    <t t-name="PrescriptionDetails" owl="1">
        <t t-if="optical_order !== 0 ">
            <div class="prescription_receipt_details" t-att-data-id='optical_order.id'>
                <table>
                    <tr>
                        <td><span>Reference:</span><t t-esc="optical_order.name"/></td>
                        <td><span>Client Name:</span><t t-esc="optical_order.customer[1]"/></td>
                    </tr>
                    <tr>
                        <td><span>Prescription Date:</span><t t-esc="optical_order.checkup_date"/></td>
                        <td><span>Test Type:</span><t t-esc="optical_order.test_type[1]"/></td>
                    </tr>
                </table>
            </div>
            <div class="prescription_receipt_table">
                <table>
                    <tr>
                        <th rowspan="2"></th>
                        <th colspan="6">Right</th>
                        <th rowspan="2"></th>
                        <th colspan="6">Left</th>
                    </tr>
                    <tr>
                        <th>SPH</th>
                        <th>CYL</th>
                        <th>AXIS</th>
                        <th>Add</th>
                        <th>Prism</th>
                        <th>Base</th>
                        <th>SPH</th>
                        <th>CYL</th>
                        <th>AXIS</th>
                        <th>Add</th>
                        <th>Prism</th>
                        <th>Base</th>
                    </tr>
                    <tr>
                        <th>Distance</th>
                        <td><t t-esc="optical_order.od_sph_distance"/></td>
                        <td><t t-esc="optical_order.od_cyl_distance"/></td>
                        <td><t t-esc="optical_order.od_ax_distance"/></td>
                        <td><t t-esc="optical_order.od_add_distance"/></td>
                        <td><t t-esc="optical_order.od_prism_distance"/></td>
                        <td><t t-esc="optical_order.od_base_distance"/></td>
                        <th>Distance</th>
                        <td><t t-esc="optical_order.os_sph_distance"/></td>
                        <td><t t-esc="optical_order.os_cyl_distance"/></td>
                        <td><t t-esc="optical_order.os_ax_distance"/></td>
                        <td><t t-esc="optical_order.os_add_distance"/></td>
                        <td><t t-esc="optical_order.os_prism_distance"/></td>
                        <td><t t-esc="optical_order.os_base_distance"/></td>
                    </tr>
                    <tr>
                        <th>Near</th>
                        <td><t t-esc="optical_order.od_sph_near"/></td>
                        <td><t t-esc="optical_order.od_cyl_near"/></td>
                        <td><t t-esc="optical_order.od_ax_near"/></td>
                        <td><t t-esc="optical_order.od_add_near"/></td>
                        <td><t t-esc="optical_order.od_prism_near"/></td>
                        <td><t t-esc="optical_order.od_base_near"/></td>
                        <th>Near</th>
                        <td><t t-esc="optical_order.os_sph_near"/></td>
                        <td><t t-esc="optical_order.os_cyl_near"/></td>
                        <td><t t-esc="optical_order.os_ax_near"/></td>
                        <td><t t-esc="optical_order.os_add_near"/></td>
                        <td><t t-esc="optical_order.os_prism_near"/></td>
                        <td><t t-esc="optical_order.os_base_near"/></td>
                    </tr>
                    <tr class="nbsp">
                        <th class="nbsp">&#160;</th>
                    </tr>
                    <tr>
                        <th>iPD</th>
                        <th colspan="2">Cl Right</th>
                        <th colspan="2">Cl Left</th>
                        <th colspan="2">Base Curve</th>
                        <th>Dim</th>
                    </tr>
                    <tr>
                        <td><t t-esc="optical_order.ipd"/></td>
                        <td colspan="2"><t t-esc="optical_order.cl_right"/></td>
                        <td colspan="2"><t t-esc="optical_order.cl_left"/></td>
                        <td colspan="2"><t t-esc="optical_order.base_curve"/></td>
                        <td><t t-esc="optical_order.dim"/></td>
                    </tr>
                </table>
            </div>
        </t>
    </t>

</templates>